name: build

on: [push]

jobs:

  build-scope:
    name: Build Scope
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Install Go
        uses: actions/setup-go@v2
        with:
          go-version: 1.15
      - name: Install Dependencies
        run: |
            ./install_build_tools.sh
            make deps
      - name: Build
        run: make all
      - name: Unit Tests
        run: make test
      - name: Archive Built Binaries
        uses: actions/upload-artifact@v2
        with:
          name: built-binaries
          path: |
            lib/linux/libscope.so
            bin/linux/scope
            bin/linux/ldscope
          retention-days: 5
      - name: Push Artifacts to S3 Bucket for CDN
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          AWS_REGION: ${{ secrets.AWS_REGION }}
          CF_DISTRIBUTION_ID: ${{ secrets.CF_DISTRIBUTION_ID }}
        run: ./deploy.sh
      - name: Build & Push Container Image to Docker Hub
        if: startsWith(github.ref, 'refs/tags/v')
        env:
          SCOPECI_TOKEN: ${{ secrets.SCOPECI_TOKEN }}
        run: ./docker/build.sh

  # --
  # Generate the rest of this file like so:
  #
  #   make -C test/testContainers workflows
  # --

  it-bash:
    name: "Integration Test: bash"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers bash
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers bash-push

  it-detect_proto:
    name: "Integration Test: detect_proto"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers detect_proto
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers detect_proto-push

  it-elastic:
    name: "Integration Test: elastic"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers elastic
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers elastic-push

  it-gogen:
    name: "Integration Test: gogen"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers gogen
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers gogen-push

  it-go_2:
    name: "Integration Test: go_2"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_2
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_2-push

  it-go_3:
    name: "Integration Test: go_3"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_3
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_3-push

  it-go_4:
    name: "Integration Test: go_4"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_4
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_4-push

  it-go_5:
    name: "Integration Test: go_5"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_5
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_5-push

  it-go_6:
    name: "Integration Test: go_6"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_6
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_6-push

  it-go_7:
    name: "Integration Test: go_7"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_7
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_7-push

  it-go_8:
    name: "Integration Test: go_8"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_8
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_8-push

  it-go_9:
    name: "Integration Test: go_9"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_9
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_9-push

  it-go_10:
    name: "Integration Test: go_10"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_10
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_10-push

  it-go_11:
    name: "Integration Test: go_11"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_11
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_11-push

  it-go_12:
    name: "Integration Test: go_12"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_12
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_12-push

  it-go_13:
    name: "Integration Test: go_13"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_13
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_13-push

  it-go_14:
    name: "Integration Test: go_14"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_14
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_14-push

  it-go_15:
    name: "Integration Test: go_15"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_15
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_15-push

  it-go_16:
    name: "Integration Test: go_16"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers go_16
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers go_16-push

  it-java6:
    name: "Integration Test: java6"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java6
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java6-push

  it-java7:
    name: "Integration Test: java7"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java7
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java7-push

  it-java8:
    name: "Integration Test: java8"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java8
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java8-push

  it-java9:
    name: "Integration Test: java9"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java9
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java9-push

  it-java10:
    name: "Integration Test: java10"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java10
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java10-push

  it-java11:
    name: "Integration Test: java11"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java11
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java11-push

  it-java12:
    name: "Integration Test: java12"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java12
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java12-push

  it-java13:
    name: "Integration Test: java13"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java13
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java13-push

  it-java14:
    name: "Integration Test: java14"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers java14
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers java14-push

  it-kafka:
    name: "Integration Test: kafka"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers kafka
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers kafka-push

  it-logstream:
    name: "Integration Test: logstream"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers logstream
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers logstream-push

  it-nginx:
    name: "Integration Test: nginx"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers nginx
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers nginx-push

  it-oracle-java6:
    name: "Integration Test: oracle-java6"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java6
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java6-push

  it-oracle-java7:
    name: "Integration Test: oracle-java7"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java7
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java7-push

  it-oracle-java8:
    name: "Integration Test: oracle-java8"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java8
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java8-push

  it-oracle-java9:
    name: "Integration Test: oracle-java9"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java9
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java9-push

  it-oracle-java10:
    name: "Integration Test: oracle-java10"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java10
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java10-push

  it-oracle-java11:
    name: "Integration Test: oracle-java11"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java11
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java11-push

  it-oracle-java12:
    name: "Integration Test: oracle-java12"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java12
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java12-push

  it-oracle-java13:
    name: "Integration Test: oracle-java13"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java13
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java13-push

  it-oracle-java14:
    name: "Integration Test: oracle-java14"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers oracle-java14
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers oracle-java14-push

  it-splunk:
    name: "Integration Test: splunk"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers splunk
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers splunk-push

  it-syscalls:
    name: "Integration Test: syscalls"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers syscalls
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers syscalls-push

  it-tls:
    name: "Integration Test: tls"
    runs-on: ubuntu-latest
    needs: build-scope
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download Built Binaries
        uses: actions/download-artifact@v2
        with:
          name: built-binaries
      - name: Run Test
        run: |
            chmod +x bin/linux/* lib/linux/*
            make -C test/testContainers tls
      - name: Save Image
        if: github.ref == 'refs/heads/master'
        env:
            DOCKER_HUB_USER: ${{ secrets.DOCKER_HUB_USER }}
            DOCKER_HUB_PASS: ${{ secrets.DOCKER_HUB_PASS }}
        run: make -C test/testContainers tls-push

