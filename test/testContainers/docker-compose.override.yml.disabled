version: '3.5'
services:
  syscalls:
    command: -s /opt/test-runner/bin/libscope.so
    volumes:
      - ./logs:/opt/test-runner/logs
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    privileged: true

  cribl:
    command: -s /opt/test-runner/bin/libscope.so
    volumes:
      - ./logs:/opt/test-runner/logs
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    privileged: true

  nginx:
    command: -s /opt/test-runner/bin/libscope.so
    volumes:
      - ./logs:/opt/test-runner/logs
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    privileged: true

  splunk:
    command: -s /opt/test-runner/bin/libscope.so
    volumes:
      - ./logs:/opt/test-runner/logs
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    privileged: true

  elastic:
    command: -s /opt/test-runner/bin/libscope.so
    volumes:
      - ./logs:/opt/test-runner/logs
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    privileged: true

  kafka:
    command: -s /opt/test-runner/bin/libscope.so
    volumes:
      - ./logs:/opt/test-runner/logs
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    privileged: true

  tls:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  detect-proto:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  bash:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
    privileged: true

  gogen:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
    privileged: true

  go-1.2:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
    privileged: true
  go-1.3:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
    privileged: true
  go-1.4:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
    privileged: true
  go-1.5:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
    privileged: true
  go-1.6:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
    privileged: true
  go-1.7:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
    privileged: true
  go-1.8:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true
  go-1.9:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true
  go-1.10:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true
  go-1.11:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true
  go-1.12:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true
  go-1.13:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true
  go-1.14:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true
  go-1.15:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true
  go-1.16:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /usr/lib/libscope.so
      - type: bind
        source: ../../bin/linux/ldscope
        target: /usr/bin/ldscope
      - type: bind
        source: ./go/influx/db
        target: /go/influx/db
    privileged: true

  java6:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  java7:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  java8:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  java9:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  java10:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  java11:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  java12:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  java13:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  java14:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  oracle-java6:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true
  
  oracle-java7:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  oracle-java8:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  oracle-java9:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  oracle-java10:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  oracle-java11:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  oracle-java12:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  oracle-java13:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true

  oracle-java14:
    volumes:
      - type: bind
        source: ../../lib/linux/libscope.so
        target: /opt/test-runner/bin/libscope.so
    environment:
      - LD_PRELOAD=/opt/test-runner/bin/libscope.so
    privileged: true
